#!/usr/bin/env node
process.env.NODE_ENV = 'development'

/**
 * program start
 */
const fs = require('fs')
const program = require('commander')
const configs = require('../lib/configs')
const Server = require('../lib/server')
const logger = require('../lib/logger')
const optsFile = configs.abcFile

program
  .option('-p,--port [port]', 'Server port')
  .option('-H,--host [host]', 'Server host')
  .parse(process.argv);

let port = program.port || 7777;
let host = program.host || 'localhost';

let server = new Server(port, host)
server.start()
// server.start(function() {
//   fs.watchFile(optsFile, function(cur, prev) {
//     logger.log('abc.json has changed!')
//
//     server.resume()
//   })
// })
